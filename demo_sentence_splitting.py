#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ¼”ç¤ºè„šæœ¬ï¼šå±•ç¤ºæ–°æ®µè½æ‹†åˆ†è®¾è®¡çš„å®é™…æ•ˆæœ
"""

import sys
import os
sys.path.insert(0, os.path.dirname(__file__))

from flask_app import format_sentences_new, get_chinese_char_count

def demo_case(name, text):
    """æ¼”ç¤ºä¸€ä¸ªæ‹†åˆ†æ¡ˆä¾‹"""
    print(f"\n{'='*70}")
    print(f"æ¡ˆä¾‹: {name}")
    print(f"{'='*70}")
    print(f"\nğŸ“ åŸæ–‡ ({get_chinese_char_count(text)}å­—):\n{text}\n")
    
    result = format_sentences_new(text)
    print(f"âœ‚ï¸  æ‹†åˆ†ç»“æœ ({len(result)}ä¸ªå¥å­):\n")
    
    for i, sentence in enumerate(result, 1):
        char_count = get_chinese_char_count(sentence)
        status = "âœ“" if char_count <= 15 else "âš "
        print(f"  {status} [{i:2d}] ({char_count:2d}å­—) {sentence}")
    
    # éªŒè¯
    all_valid = all(get_chinese_char_count(s) <= 15 for s in result)
    print(f"\nâœ“ éªŒè¯: {'é€šè¿‡' if all_valid else 'å¤±è´¥'} - æ‰€æœ‰å¥å­ â‰¤ 15å­—")

def main():
    print("\n" + "="*70)
    print("æ®µè½æ‹†åˆ†è®¾è®¡æ¼”ç¤º")
    print("="*70)
    
    # æ¡ˆä¾‹1ï¼šå¤æ–‡è¯—æ­Œ
    demo_case(
        "å¤æ–‡è¯—æ­Œï¼ˆç™»é¸•é·€æ¨“ï¼‰",
        "ç™»é¸•é·€æ¨“ã€‚ç‹ä¹‹æ¸™ã€‚ç™½æ—¥ä¾å±±ç›¡ã€‚é»ƒæ²³å…¥æµ·æµã€‚æ¬²çª®åƒé‡Œç›®ã€‚æ›´ä¸Šä¸€å±¤æ¨“ã€‚"
    )
    
    # æ¡ˆä¾‹2ï¼šé•¿ç¯‡æ–‡ç« 
    demo_case(
        "é•¿ç¯‡æ–‡ç« ",
        "è¿™æ˜¯ä¸€ä¸ªéå¸¸é•¿çš„å¥å­ï¼Œå®ƒåŒ…å«äº†å¾ˆå¤šæ±‰å­—ï¼Œéœ€è¦è¢«ç³»ç»Ÿè‡ªåŠ¨æ‹†åˆ†æˆå¤šä¸ªè¾ƒçŸ­çš„éƒ¨åˆ†ï¼Œä»¥ç¡®ä¿æ¯ä¸ªéƒ¨åˆ†çš„é•¿åº¦éƒ½ä¸è¶…è¿‡åäº”ä¸ªæ±‰å­—ï¼Œè¿™æ ·å¯ä»¥è®©è¯­éŸ³æœ—è¯»æ›´åŠ æµç•…è‡ªç„¶ã€‚"
    )
    
    # æ¡ˆä¾‹3ï¼šæ··åˆæ ‡ç‚¹
    demo_case(
        "æ··åˆæ ‡ç‚¹ç¬¦å·",
        "ç¬¬ä¸€å¥ã€‚ç¬¬äºŒå¥ï¼Œç¬¬ä¸‰å¥ï¼›ç¬¬å››å¥ï¼šç¬¬äº”å¥ï¼Ÿç¬¬å…­å¥ã€‚"
    )
    
    # æ¡ˆä¾‹4ï¼šå®é™…æ•™å­¦å†…å®¹
    demo_case(
        "å®é™…æ•™å­¦å†…å®¹",
        "æ˜¨å¤©æˆ‘å»å…¬å›­æ•£æ­¥ï¼Œçœ‹åˆ°å¾ˆå¤šç¾ä¸½çš„èŠ±æœµåœ¨ç››å¼€ã€‚å¤©æ°”å¾ˆå¥½ï¼Œé˜³å…‰é€è¿‡æ ‘å¶æ´’ä¸‹æ¥ï¼Œç…§äº®äº†æ•´ä¸ªå…¬å›­ã€‚æˆ‘åœ¨é•¿æ¤…ä¸Šåäº†ä¸€ä¼šå„¿ï¼Œäº«å—ç€å®é™å’Œèˆ’é€‚çš„ç¯å¢ƒã€‚"
    )
    
    # æ¡ˆä¾‹5ï¼šçŸ­å¥ç»„åˆ
    demo_case(
        "çŸ­å¥ç»„åˆ",
        "ä½ å¥½ã€‚æ—©ä¸Šå¥½ã€‚ä»Šå¤©å¤©æ°”å¦‚ä½•ã€‚çœŸä¸é”™ã€‚"
    )
    
    print(f"\n{'='*70}")
    print("âœ“ æ¼”ç¤ºå®Œæˆï¼")
    print(f"{'='*70}\n")

if __name__ == '__main__':
    main()
